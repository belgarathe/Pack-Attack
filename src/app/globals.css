@import "tailwindcss";

/* ============================================
   CSS RESET & CROSS-BROWSER NORMALIZATION
   ============================================ */

/* Box sizing rules */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Remove default margin and padding */
* {
  margin: 0;
  padding: 0;
}

/* Prevent font size inflation on mobile */
html {
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: none;
  text-size-adjust: none;
}

/* Core root settings */
:root {
  --primary: 59 130 246;
  --secondary: 139 92 246;
  
  /* Touch-friendly sizes */
  --touch-target-min: 44px;
  
  /* Safe area insets for notched devices */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  
  /* Smooth scrolling */
  scroll-behavior: smooth;
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Remove list styles */
ul[role='list'],
ol[role='list'] {
  list-style: none;
}

/* Set shorter line heights on headings and interactive elements */
h1, h2, h3, h4,
button, input, label {
  line-height: 1.1;
}

/* Balance text wrapping on headings */
h1, h2, h3, h4 {
  text-wrap: balance;
}

/* A elements that don't have a class get default styles */
a:not([class]) {
  text-decoration-skip-ink: auto;
  color: currentColor;
}

/* Make images easier to work with */
img,
picture,
video,
canvas,
svg {
  display: block;
  max-width: 100%;
  height: auto;
}

/* Inherit fonts for inputs and buttons */
input,
button,
textarea,
select {
  font: inherit;
}

/* Remove default button styles */
button {
  background: none;
  border: none;
  cursor: pointer;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

/* Make sure textareas without a rows attribute are not tiny */
textarea:not([rows]) {
  min-height: 10em;
}

/* Anything that has been anchored to should have extra scroll margin */
:target {
  scroll-margin-block: 5ex;
}

/* ============================================
   BODY STYLES
   ============================================ */

body {
  color: rgb(255 255 255);
  background: rgb(3 7 18);
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height for mobile */
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Prevent horizontal scroll on mobile */
  overflow-x: hidden;
}

/* ============================================
   CROSS-BROWSER ANIMATIONS
   ============================================ */

@keyframes spin-slow {
  0% {
    transform: rotateY(0deg) scale(1);
  }
  25% {
    transform: rotateY(90deg) scale(1.05);
  }
  50% {
    transform: rotateY(180deg) scale(1.1);
  }
  75% {
    transform: rotateY(270deg) scale(1.05);
  }
  100% {
    transform: rotateY(360deg) scale(1);
  }
}

.animate-spin-slow {
  animation: spin-slow 0.6s ease-in-out infinite;
  transform-style: preserve-3d;
  will-change: transform;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Add smooth transitions for card animations */
.card-transition {
  transition: all 0.3s ease-in-out;
}

/* Ensure animations work on all browsers */
@supports (animation: spin-slow 0.6s) {
  .animate-spin-slow {
    animation: spin-slow 0.6s ease-in-out infinite;
  }
}

/* ============================================
   MOBILE-SPECIFIC OPTIMIZATIONS
   ============================================ */

/* Touch-friendly tap targets */
.touch-target {
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
}

/* Improve tap highlight on iOS */
button,
a,
[role="button"] {
  -webkit-tap-highlight-color: rgba(59, 130, 246, 0.2);
}

/* Prevent text selection on interactive elements */
button,
[role="button"],
.no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Safe area padding for notched devices */
.safe-area-padding {
  padding-left: max(1rem, var(--safe-area-inset-left));
  padding-right: max(1rem, var(--safe-area-inset-right));
}

.safe-area-padding-bottom {
  padding-bottom: max(1rem, var(--safe-area-inset-bottom));
}

/* ============================================
   RESPONSIVE CONTAINER
   ============================================ */

.container {
  width: 100%;
  max-width: 1280px;
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;
}

@media (min-width: 640px) {
  .container {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
}

@media (min-width: 1024px) {
  .container {
    padding-left: 2rem;
    padding-right: 2rem;
  }
}

/* ============================================
   SCROLLBAR STYLING (CROSS-BROWSER)
   ============================================ */

/* Webkit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgb(17 24 39);
}

::-webkit-scrollbar-thumb {
  background: rgb(75 85 99);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgb(107 114 128);
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: rgb(75 85 99) rgb(17 24 39);
}

/* ============================================
   FOCUS STYLES (ACCESSIBILITY)
   ============================================ */

/* Remove default focus outline */
:focus {
  outline: none;
}

/* Custom focus-visible style */
:focus-visible {
  outline: 2px solid rgb(var(--primary));
  outline-offset: 2px;
}

/* Focus ring utility */
.focus-ring:focus-visible {
  outline: 2px solid rgb(var(--primary));
  outline-offset: 2px;
  border-radius: 0.375rem;
}

/* ============================================
   MOBILE MENU STYLES
   ============================================ */

.mobile-menu {
  position: fixed;
  inset: 0;
  top: 60px;
  z-index: 40;
  background: rgba(3, 7, 18, 0.98);
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
  transform: translateX(100%);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

.mobile-menu.open {
  transform: translateX(0);
}

/* Hamburger menu animation */
.hamburger-line {
  display: block;
  width: 24px;
  height: 2px;
  background: currentColor;
  transition: transform 0.3s ease, opacity 0.3s ease;
  border-radius: 1px;
}

.hamburger-active .hamburger-line:nth-child(1) {
  transform: rotate(45deg) translate(5px, 5px);
}

.hamburger-active .hamburger-line:nth-child(2) {
  opacity: 0;
}

.hamburger-active .hamburger-line:nth-child(3) {
  transform: rotate(-45deg) translate(5px, -5px);
}

/* ============================================
   FORM INPUT CROSS-BROWSER FIXES
   ============================================ */

/* Remove inner spin button from number inputs */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
}

/* Fix autofill background color */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
textarea:-webkit-autofill,
textarea:-webkit-autofill:hover,
textarea:-webkit-autofill:focus,
select:-webkit-autofill,
select:-webkit-autofill:hover,
select:-webkit-autofill:focus {
  -webkit-box-shadow: 0 0 0 1000px rgb(17 24 39) inset;
  -webkit-text-fill-color: rgb(255 255 255);
  transition: background-color 5000s ease-in-out 0s;
}

/* ============================================
   IMAGE LOADING OPTIMIZATION
   ============================================ */

/* Prevent layout shift on images */
img {
  content-visibility: auto;
}

/* Skeleton loading state */
.skeleton {
  background: linear-gradient(
    90deg,
    rgb(31 41 55) 0%,
    rgb(55 65 81) 50%,
    rgb(31 41 55) 100%
  );
  background-size: 200% 100%;
  animation: skeleton-pulse 1.5s ease-in-out infinite;
}

@keyframes skeleton-pulse {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* ============================================
   PRINT STYLES
   ============================================ */

@media print {
  *,
  *::before,
  *::after {
    background: transparent !important;
    color: #000 !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }

  a,
  a:visited {
    text-decoration: underline;
  }

  img {
    max-width: 100% !important;
  }

  @page {
    margin: 2cm;
  }

  h2, h3 {
    page-break-after: avoid;
  }
}

/* ============================================
   HIGH CONTRAST MODE SUPPORT
   ============================================ */

@media (prefers-contrast: high) {
  :root {
    --primary: 96 165 250;
  }
  
  .border-gray-800 {
    border-color: rgb(156 163 175) !important;
  }
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Hide on mobile */
.hide-mobile {
  display: none;
}

@media (min-width: 768px) {
  .hide-mobile {
    display: block;
  }
}

/* Show on mobile only */
.show-mobile {
  display: block;
}

@media (min-width: 768px) {
  .show-mobile {
    display: none;
  }
}

/* Flex hide/show variants */
.hide-mobile-flex {
  display: none;
}

@media (min-width: 768px) {
  .hide-mobile-flex {
    display: flex;
  }
}

.show-mobile-flex {
  display: flex;
}

@media (min-width: 768px) {
  .show-mobile-flex {
    display: none;
  }
}

/* Truncate text with ellipsis */
.truncate-text {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Visually hidden (accessible) */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}
